<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Registro - Chat</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="auth">
    <h2>Registro</h2>
    <form id="registerForm">
      <input name="username" placeholder="Usuario" required>
      <input name="displayName" placeholder="Nombre a mostrar (opcional)">
      <input name="password" type="password" placeholder="ContraseÃ±a" required>
      <button type="submit">Registrar</button>
    </form>
    <a href="/login.html">Ya tengo cuenta</a>
  </div>
  <script>
  document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const fd = new FormData(e.target);
    const body = { username: fd.get('username'), password: fd.get('password'), displayName: fd.get('displayName') };
    const res = await fetch('/api/register', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
    const j = await res.json();
    if (j.ok) location.href = '/chat.html'; else alert(j.error || 'Error');
  });
  </script>
  <script src="/js/cursor.js"></script>
</body>
</html>
